{% extends "base.html" %}

{% block content %}


{% if messages %}
{% for message in messages %}
<div class="alert {{message.tags}} alert-dismissible fade show mb-0" role="alert">
    <strong>
        {{message}}
    </strong>
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
{% endfor %}
{% endif %}

<h3 class="eda_heading">MACHINE LEARNING</h3>
<form method="POST">
    {% csrf_token %}
        <div class="card">
        <label style="margin-top: 20px;" for="model">Choose a model:&nbsp;&nbsp;</label>
        <select id="model" name="model_name">
            {% for model in model_name_list %}
            <option value="{{model}}">{{model}}</option>
            {% endfor %}
        </select>

        &nbsp;&nbsp;&nbsp;
        <!--        ---------------------------------------------------------------------------->
<!--        <div id="showdivid" style="display:none;">-->
        <div style="display:none;">
            {% if lr %}
            <label>{{lr}} </label>
            {% endif %}

        </div>

        <!--        ---------------------------------------------------------------------------->

        <br>
        <button type="submit" class="btn btn-primary btn-sm" value="MODEL TRAINING">MODEL TRAINING</button>
        {% if actual_pred_df %}
        <button type="submit" name="evaluation" class="btn btn-primary btn-sm" value="evaluation">MODEL EVALUATION
        </button>
        {% endif %}
    </div>
    <div>
        {% if actual_pred_df %}
        {{actual_pred_df | safe}}
        {% endif %}
    </div>
</form>
<p class="footer-heart">
  Made with <g-emoji class="g-emoji" alias="heart" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2764.png">
<img class="emoji" alt="heart" height="20" width="20" src="https://github.githubassets.com/images/icons/emoji/unicode/2764.png"></g-emoji> | <a href="https://armin.id">ammarfitwalla</a>
</p>

<style>
.card {
box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
display: flex;
flex-direction: row;
transition: 0.2s;
border-radius: 10px;
padding: 1.1%;
display: flex;
margin-bottom: 15px;
border-color: #445e78!important;
border-top: medium;
}
.card:hover {
  box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
}
</style>

{% endblock %}

{% block script %}
<script>
$(document).ready(function(){
    url = '/model_selection/';
    $('select#model').change(function(){
        $('#showdivid').show();
        data = $(this).val();
        console.log('data', data)
        $.ajax({
            url: url,
            data: {'data': data},
            success: function(res){
                console.log('result', res);
            },
            error: function(err){
                console.log('error', err);
            },
        });
    });
});

</script>

{% endblock script %}


